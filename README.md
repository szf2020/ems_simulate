# EMS Simulate - èƒ½æºç®¡ç†ç³»ç»Ÿæ¨¡æ‹Ÿå™¨

ä¸€ä¸ªç”¨äºæ¨¡æ‹Ÿèƒ½æºç®¡ç†ç³»ç»Ÿï¼ˆEMSï¼‰ä¸­å…³é”®è®¾å¤‡è¡Œä¸ºçš„è½¯ä»¶ç³»ç»Ÿï¼Œä¸»è¦ç”¨äºæµ‹è¯•å’Œå¼€å‘åœºæ™¯ã€‚ç³»ç»Ÿæ”¯æŒå¤šç§å·¥ä¸šé€šä¿¡åè®®ï¼ˆModbus TCP/RTUã€IEC104ã€DLT645ï¼‰ï¼Œå¯æ¨¡æ‹ŸçœŸå®å·¥ä¸šè®¾å¤‡ï¼ˆå¦‚PCSå‚¨èƒ½å˜æµå™¨ã€BMSç”µæ± ç®¡ç†ç³»ç»Ÿã€ç”µè¡¨ç­‰ï¼‰çš„æ•°æ®äº¤äº’ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ”Œ **å¤šåè®®æ”¯æŒ**ï¼šModbus TCP/RTUã€IEC 60870-5-104ã€DLT/T 645-2007
- ï¿½ **è®¾å¤‡æ¨¡æ‹Ÿ**ï¼šPCSå‚¨èƒ½å˜æµå™¨ã€BMSç”µæ± ç®¡ç†ç³»ç»Ÿã€ç”µè¡¨ã€æ–­è·¯å™¨ç­‰
- ğŸ¯ **æ•°æ®æ¨¡æ‹Ÿ**ï¼šæ”¯æŒéšæœºæ¨¡æ‹Ÿã€æ­¥è¿›æ¨¡æ‹Ÿç­‰å¤šç§æ–¹å¼
- âš™ï¸ **çµæ´»é…ç½®**ï¼šæ”¯æŒæ•°æ®åº“é…ç½®å’ŒCSVæ–‡ä»¶å¯¼å…¥
- ğŸ“Š **Webç•Œé¢**ï¼šVue3 + TypeScript æ„å»ºçš„ç°ä»£åŒ–å‰ç«¯ç•Œé¢
- ï¿½ **çƒ­é‡è½½**ï¼šæ”¯æŒè¿è¡Œæ—¶ä¿®æ”¹æµ‹ç‚¹å±æ€§

## ç•Œé¢å±•ç¤º

1. ä¸»ç•Œé¢

   ![](resources\img\1.png)

2. æ–°å¢è®¾å¤‡

   ![](resources\img\2.png)

3. å±•å¼€åˆ—è¡¨è¡Œå¯ä»¥ç¼–è¾‘æµ‹ç‚¹å€¼

   ![](resources\img\3.png)

4. è®¾ç½®æ•°æ®æ¨¡æ‹Ÿæ–¹å¼

   ![](resources\img\4.png)

5. ç¼–è¾‘æµ‹ç‚¹ä¿¡æ¯

   ![](resources\img\5.png)

6. ä»¥DL/T645-2007åè®®ä¸ºä¾‹ï¼Œæµ‹è¯•è¯»å–å€¼æ˜¯å¦æ­£ç¡®ï¼Œéœ€è¦ç»“åˆä¹˜æ³•ç³»æ•°å’ŒåŠ æ³•ç³»æ•°ï¼Œå¯ä»¥çœ‹åˆ°æ•°æ®è¯»å–æ­£ç¡®

   ![](resources\img\6.png)

## æŠ€æœ¯æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Web å‰ç«¯ (Vue3)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚ HTTP/REST API
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      FastAPI åç«¯æœåŠ¡                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ DeviceControllerâ”‚ ChannelServiceâ”‚ PointService (YC/YX/YK/YT)â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Device Layer (è®¾å¤‡å±‚)                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                    Device æ ¸å¿ƒç±»                         â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚    â”‚
â”‚  â”‚  â”‚ PointManager â”‚ â”‚ ProtocolHandlerâ”‚ â”‚SimulationControllerâ”‚â”‚   â”‚
â”‚  â”‚  â”‚   (æµ‹ç‚¹ç®¡ç†)  â”‚ â”‚  (åè®®å¤„ç†å™¨)  â”‚ â”‚    (æ¨¡æ‹Ÿæ§åˆ¶)    â”‚â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Protocol Layer (åè®®å±‚)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ModbusHandler â”‚  â”‚IEC104Handler â”‚  â”‚  DLT645Handler       â”‚   â”‚
â”‚  â”‚ (Server/Client)â”‚ â”‚ (Server/Client)â”‚ â”‚    (Server)        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æŠ€æœ¯æ ˆ

| å±‚æ¬¡ | æŠ€æœ¯ |
|------|------|
| **å‰ç«¯** | Vue 3, TypeScript, Vite, Element Plus |
| **åç«¯** | Python 3.11+, FastAPI, SQLAlchemy |
| **åè®®** | pymodbus 3.6+, c104, dlt645 |
| **æ•°æ®åº“** | SQLite (é»˜è®¤) / MySQL |

---

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Python >= 3.11
- Node.js >= 18
- pip, npm

### å®‰è£…ä¾èµ–

```bash
# 1. å®‰è£… Python ä¾èµ–
pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple

# 2. å‰ç«¯å¼€å‘ç¯å¢ƒ
cd front
npm install
npm run dev

# 3. å¯åŠ¨åç«¯æœåŠ¡
python start_back_end.py
```

### Docker éƒ¨ç½²

```bash
docker build -t ems_simulate .
docker run -d --name ems -p 502:502 -p 2404:2404 -p 8899:8899 ems_simulate
```

---

## æ ¸å¿ƒæ¦‚å¿µ

### æµ‹ç‚¹ç±»å‹

ç³»ç»Ÿæ”¯æŒå››ç§æµ‹ç‚¹ç±»å‹ï¼š

| ç±»å‹ | ä»£ç  | è¯´æ˜ | å…¸å‹ç”¨é€” |
|------|------|------|----------|
| **é¥æµ‹ (YC)** | frame_type=0 | æ¨¡æ‹Ÿé‡æµ‹é‡ | ç”µå‹ã€ç”µæµã€åŠŸç‡ã€æ¸©åº¦ |
| **é¥ä¿¡ (YX)** | frame_type=1 | å¼€å…³é‡çŠ¶æ€ | è¿è¡ŒçŠ¶æ€ã€æ•…éšœæ ‡å¿— |
| **é¥æ§ (YK)** | frame_type=2 | å¼€å…³é‡å‘½ä»¤ | å¯åœå‘½ä»¤ã€åˆåˆ†é—¸ |
| **é¥è°ƒ (YT)** | frame_type=3 | æ¨¡æ‹Ÿé‡å‘½ä»¤ | åŠŸç‡è®¾å®šã€æ¸©åº¦è®¾å®š |

### åè®®ç±»å‹

| åè®® | æœåŠ¡ç«¯ | å®¢æˆ·ç«¯ | é»˜è®¤ç«¯å£ |
|------|--------|--------|----------|
| Modbus TCP | âœ… | âœ… | 502 |
| Modbus RTU | âœ… | âœ… | ä¸²å£ |
| IEC 60870-5-104 | âœ… | âœ… | 2404 |
| DLT/T 645-2007 | âœ… | - | 8899 |

---

## è§£æç ç³»ç»Ÿ (Decode)

è§£æç å®šä¹‰äº† Modbus å¯„å­˜å™¨æ•°æ®çš„è§£ææ–¹å¼ï¼ŒåŒ…æ‹¬æ•°æ®ç±»å‹ã€å­—èŠ‚åºå’Œä½æ•°ã€‚

### è§£æç ä¸€è§ˆè¡¨

#### 16ä½æ•´æ•° (1ä¸ªå¯„å­˜å™¨)

| è§£æç  | åç§° | è¯´æ˜ | å­—èŠ‚åº |
|--------|------|------|--------|
| `0x20` | UINT16_BE | 16ä½æ— ç¬¦å·æ•´æ•° | å¤§ç«¯ (AB) |
| `0x21` | INT16_BE | 16ä½æœ‰ç¬¦å·æ•´æ•° | å¤§ç«¯ (AB) |
| `0xC0` | UINT16_LE | 16ä½æ— ç¬¦å·æ•´æ•° | å°ç«¯ (BA) |
| `0xC1` | INT16_LE | 16ä½æœ‰ç¬¦å·æ•´æ•° | å°ç«¯ (BA) |
| `0xB0` | UINT16_BE_SWAP | 16ä½æ— ç¬¦å·æ•´æ•° | å¤§ç«¯å­—äº¤æ¢ |
| `0xB1` | INT16_BE_SWAP | 16ä½æœ‰ç¬¦å·æ•´æ•° | å¤§ç«¯å­—äº¤æ¢ |

#### 32ä½æ•´æ•°/æµ®ç‚¹ (2ä¸ªå¯„å­˜å™¨)

| è§£æç  | åç§° | è¯´æ˜ | å­—èŠ‚åº |
|--------|------|------|--------|
| `0x40` | UINT32_BE | 32ä½æ— ç¬¦å·æ•´æ•° | å¤§ç«¯ (ABCD) |
| `0x41` | INT32_BE | 32ä½æœ‰ç¬¦å·æ•´æ•° | å¤§ç«¯ (ABCD) |
| `0x42` | FLOAT_BE | 32ä½æµ®ç‚¹æ•° | å¤§ç«¯ (ABCD) |
| `0xD0` | UINT32_LE | 32ä½æ— ç¬¦å·æ•´æ•° | å°ç«¯ (DCBA) |
| `0xD1` | INT32_LE | 32ä½æœ‰ç¬¦å·æ•´æ•° | å°ç«¯ (DCBA) |
| `0xD2` | FLOAT_LE | 32ä½æµ®ç‚¹æ•° | å°ç«¯ (DCBA) |
| `0x43` | UINT32_BE_SWAP | 32ä½æ— ç¬¦å·æ•´æ•° | å¤§ç«¯å­—äº¤æ¢ (CDAB) |
| `0x44` | INT32_BE_SWAP | 32ä½æœ‰ç¬¦å·æ•´æ•° | å¤§ç«¯å­—äº¤æ¢ (CDAB) |
| `0x45` | FLOAT_BE_SWAP | 32ä½æµ®ç‚¹æ•° | å¤§ç«¯å­—äº¤æ¢ (CDAB) |
| `0xD4` | UINT32_LE_SWAP | 32ä½æ— ç¬¦å·æ•´æ•° | å°ç«¯å­—äº¤æ¢ (BADC) |
| `0xD5` | INT32_LE_SWAP | 32ä½æœ‰ç¬¦å·æ•´æ•° | å°ç«¯å­—äº¤æ¢ (BADC) |
| `0xD3` | FLOAT_LE_SWAP | 32ä½æµ®ç‚¹æ•° | å°ç«¯å­—äº¤æ¢ (BADC) |

#### 64ä½æ•´æ•°/æµ®ç‚¹ (4ä¸ªå¯„å­˜å™¨)

| è§£æç  | åç§° | è¯´æ˜ | å­—èŠ‚åº |
|--------|------|------|--------|
| `0x60` | UINT64_BE | 64ä½æ— ç¬¦å·æ•´æ•° | å¤§ç«¯ |
| `0x61` | INT64_BE | 64ä½æœ‰ç¬¦å·æ•´æ•° | å¤§ç«¯ |
| `0x62` | DOUBLE_BE | 64ä½åŒç²¾åº¦æµ®ç‚¹ | å¤§ç«¯ |
| `0xE0` | UINT64_LE | 64ä½æ— ç¬¦å·æ•´æ•° | å°ç«¯ |
| `0xE1` | INT64_LE | 64ä½æœ‰ç¬¦å·æ•´æ•° | å°ç«¯ |
| `0xE2` | DOUBLE_LE | 64ä½åŒç²¾åº¦æµ®ç‚¹ | å°ç«¯ |

#### 8ä½å­—ç¬¦ (1ä¸ªå¯„å­˜å™¨)

| è§£æç  | åç§° | è¯´æ˜ |
|--------|------|------|
| `0x10` | CHAR_8_BE | 8ä½æ— ç¬¦å·å­—ç¬¦ |
| `0x11` | CHAR_8_BE_SIGNED | 8ä½æœ‰ç¬¦å·å­—ç¬¦ |

### å­—èŠ‚åºè¯´æ˜

ä»¥32ä½æµ®ç‚¹æ•° `1234.5` ä¸ºä¾‹ï¼Œå…¶åå…­è¿›åˆ¶è¡¨ç¤ºä¸º `449A5000`ï¼š

| å­—èŠ‚åºç±»å‹ | å­˜å‚¨é¡ºåº | è¯´æ˜ |
|------------|----------|------|
| **å¤§ç«¯ (BE)** | `44 9A 50 00` | é«˜å­—èŠ‚åœ¨å‰ï¼Œæ ‡å‡†ç½‘ç»œå­—èŠ‚åº |
| **å°ç«¯ (LE)** | `00 50 9A 44` | ä½å­—èŠ‚åœ¨å‰ï¼Œx86æ¶æ„å¸¸ç”¨ |
| **å¤§ç«¯å­—äº¤æ¢ (BE_SWAP)** | `50 00 44 9A` | å¯„å­˜å™¨å†…å¤§ç«¯ï¼Œå¯„å­˜å™¨é—´äº¤æ¢ |
| **å°ç«¯å­—äº¤æ¢ (LE_SWAP)** | `9A 44 00 50` | å¯„å­˜å™¨å†…å°ç«¯ï¼Œå¯„å­˜å™¨é—´äº¤æ¢ |

### ä»£ç ä½¿ç”¨ç¤ºä¾‹

```python
from src.enums.modbus_register import Decode, DecodeCode

# æ–¹å¼ä¸€ï¼šä½¿ç”¨è§£æç å­—ç¬¦ä¸²
info = Decode.get_info("0x41")
print(f"å¯„å­˜å™¨æ•°é‡: {info.register_cnt}")  # 2
print(f"æ˜¯å¦æœ‰ç¬¦å·: {info.is_signed}")      # True
print(f"å­—èŠ‚åº: {info.endian}")             # >

# æ–¹å¼äºŒï¼šä½¿ç”¨æšä¸¾ï¼ˆæ¨èï¼‰
info = DecodeCode.FLOAT_BE.value
print(f"è§£æç : {info.code}")              # 0x42
print(f"æè¿°: {info.description}")         # 32ä½æµ®ç‚¹æ•°(å¤§ç«¯)

# æ•°æ®æ‰“åŒ…/è§£åŒ…
packed = Decode.pack_value(info.pack_format, 1234.5)
value = Decode.unpack_value(info.pack_format, packed)

# è·å–æ‰€æœ‰è§£æç ï¼ˆä¾›å‰ç«¯ä¸‹æ‹‰èœå•ä½¿ç”¨ï¼‰
all_codes = Decode.get_all_codes()
```

### çœŸå®å€¼è½¬æ¢

é¥æµ‹å’Œé¥è°ƒç±»å‹æ”¯æŒç³»æ•°è½¬æ¢ï¼š

```
çœŸå®å€¼ = å¯„å­˜å™¨å€¼ Ã— ä¹˜æ³•ç³»æ•° + åŠ æ³•ç³»æ•°
å¯„å­˜å™¨å€¼ = (çœŸå®å€¼ - åŠ æ³•ç³»æ•°) Ã· ä¹˜æ³•ç³»æ•°
```

| å±æ€§ | è¯´æ˜ | é»˜è®¤å€¼ |
|------|------|--------|
| `mul_coe` | ä¹˜æ³•ç³»æ•° | 1.0 |
| `add_coe` | åŠ æ³•ç³»æ•° | 0.0 |

---

## é¡¹ç›®ç»“æ„

```
ems_simulate/
â”œâ”€â”€ src/                        # åç«¯æºç 
â”‚   â”œâ”€â”€ config/                 # é…ç½®ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ config.py          # å…¨å±€é…ç½®
â”‚   â”‚   â””â”€â”€ log/               # æ—¥å¿—é…ç½®
â”‚   â”œâ”€â”€ data/                   # æ•°æ®å±‚
â”‚   â”‚   â”œâ”€â”€ dao/               # æ•°æ®è®¿é—®å¯¹è±¡
â”‚   â”‚   â””â”€â”€ service/           # ä¸šåŠ¡æœåŠ¡
â”‚   â”œâ”€â”€ device/                 # è®¾å¤‡æ¨¡æ‹Ÿå™¨ â­
â”‚   â”‚   â”œâ”€â”€ core/              # æ ¸å¿ƒç±»
â”‚   â”‚   â”‚   â”œâ”€â”€ device.py      # Device ä¸»ç±»
â”‚   â”‚   â”‚   â”œâ”€â”€ point_manager.py # æµ‹ç‚¹ç®¡ç†
â”‚   â”‚   â”‚   â””â”€â”€ data_exporter.py # æ•°æ®å¯¼å‡º
â”‚   â”‚   â”œâ”€â”€ protocol/          # åè®®å¤„ç†å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ base_handler.py    # åŸºç±»
â”‚   â”‚   â”‚   â”œâ”€â”€ modbus_handler.py  # Modbus
â”‚   â”‚   â”‚   â”œâ”€â”€ iec104_handler.py  # IEC104
â”‚   â”‚   â”‚   â””â”€â”€ dlt645_handler.py  # DLT645
â”‚   â”‚   â”œâ”€â”€ simulator/         # æ¨¡æ‹Ÿæ§åˆ¶
â”‚   â”‚   â”œâ”€â”€ factory/           # è®¾å¤‡å·¥å‚
â”‚   â”‚   â””â”€â”€ types/             # è®¾å¤‡ç±»å‹
â”‚   â”œâ”€â”€ enums/                  # æšä¸¾å’Œæ•°æ®ç»“æ„
â”‚   â”‚   â”œâ”€â”€ modbus_register.py # è§£æç å®šä¹‰ â­
â”‚   â”‚   â””â”€â”€ points/            # æµ‹ç‚¹ç±»å‹
â”‚   â”œâ”€â”€ proto/                  # åº•å±‚åè®®å®ç°
â”‚   â”‚   â”œâ”€â”€ pyModbus/          # Modbus æœåŠ¡ç«¯/å®¢æˆ·ç«¯
â”‚   â”‚   â”œâ”€â”€ iec104/            # IEC104 æœåŠ¡ç«¯/å®¢æˆ·ç«¯
â”‚   â”‚   â””â”€â”€ dlt645/            # DLT645 åè®®åº“
â”‚   â””â”€â”€ web/                    # Web API
â”‚       â”œâ”€â”€ device/            # è®¾å¤‡æ§åˆ¶æ¥å£
â”‚       â””â”€â”€ data/              # æ•°æ®ç®¡ç†æ¥å£
â”œâ”€â”€ front/                      # å‰ç«¯æºç  (Vue3)
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/        # ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ views/             # é¡µé¢
â”‚   â”‚   â””â”€â”€ api/               # APIå°è£…
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ data/                       # SQLite æ•°æ®åº“
â”œâ”€â”€ start_back_end.py          # åç«¯å…¥å£
â””â”€â”€ requirements.txt           # Pythonä¾èµ–
```

---

## å¼€å‘æŒ‡å—

### æ·»åŠ æ–°è®¾å¤‡ç±»å‹

1. åœ¨ `src/device/types/` ä¸‹åˆ›å»ºæ–°è®¾å¤‡ç±»
2. ç»§æ‰¿ `Device` åŸºç±»
3. å®ç° `setSpecialDataPointValues()` æ–¹æ³•ï¼ˆå¯é€‰ï¼‰

```python
from src.device.core.device import Device, DeviceType

class MyDevice(Device):
    def __init__(self):
        super().__init__()
        self.device_type = DeviceType.Other
    
    def setSpecialDataPointValues(self):
        # è®¾ç½®ç‰¹æ®Šæµ‹ç‚¹å…³è”é€»è¾‘
        pass
```

### æ‰©å±•æ–°åè®®

1. åœ¨ `src/device/protocol/` ä¸‹åˆ›å»ºå¤„ç†å™¨
2. ç»§æ‰¿ `ServerHandler` æˆ– `ClientHandler`
3. å®ç°æŠ½è±¡æ–¹æ³•

```python
from src.device.protocol.base_handler import ServerHandler

class MyProtocolHandler(ServerHandler):
    def initialize(self, config):
        pass
    
    async def start(self) -> bool:
        self._is_running = True
        return True
    
    async def stop(self) -> bool:
        self._is_running = False
        return True
    
    def read_value(self, point):
        pass
    
    def write_value(self, point, value):
        pass
    
    def add_points(self, points):
        pass
```

---

## è®¸å¯è¯

Apache License 2.0

## è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼